pipeline {
    agent any
    stages {
        stage('Run Python Script') {
            steps {
                sh 'python3 ./main.py > output.txt 2>&1' // run script and capture output
            }
        }
        stage('Print Console Report') {
            steps {
                echo readFile('output.txt') // print output to console
            }
        }
        post {
            def consoleReport = readFile('output.txt')
            emailext body: 'email test!\n' + consoleReport, subject: 'jenkins test!', to: 'liav@nefesh.co.il'
         }
     }
    }
}
